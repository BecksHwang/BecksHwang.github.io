<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    
    <title>Spring + Hibernate + Struts2 | Becks</title>
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="最近，学会了为别人做菜">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Spring + Hibernate + Struts2 | Becks">
    <meta name="twitter:description" content="最近，学会了为别人做菜">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Spring + Hibernate + Struts2 | Becks">
    <meta property="og:description" content="最近，学会了为别人做菜">

    
    <meta name="author" content="Becks">
    
    <link rel="stylesheet" href="/css/vno.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">

    
    <link rel="icon" href="/images/ico.png">
    

    <meta name="generator" content="hexo"/>
    

    <link rel="canonical" href="http://yoursite.com/2016/03/23/S2SH/"/>

    
</head>

<body class="home-template no-js">

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>

    
<header class="panel-cover panel-cover--collapsed" style="background-image: url(/images/background-glaxy.jpg)">
  <div class="panel-main">
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/" title="前往 Becks 的主页"><img src="/images/logo2.jpg" width="80" alt="Becks logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage for Becks">Becks</a></h1>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">最近，学会了为别人做菜</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />

        <div class="navigation-wrapper">
          <div>
          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/#blog" title="访问博客" class="blog-button">博客</a></li>
            
            </ul>
          </nav>
          </div>
          <div>
          <nav class="cover-navigation navigation--social">
  <ul class="navigation">

  <!-- Weibo-->
  
  <li class="navigation__item">
    <a href="http://weibo.com/u/2398846057" title="我的微博" target="_blank">
      <i class='social fa fa-weibo'></i>
      <span class="label">Weibo</span>
    </a>
  </li> 


  <!-- Github -->
  
  <li class="navigation__item">
    <a href="https://github.com/BecksHwang" title="查看我的GitHub主页" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>


<!-- Stack Overflow -->
        

  <!-- Google Plus -->
  

<!-- Facebook -->

  
<!-- Twitter -->

  <li class="navigation__item">
    <a href="https://twitter.com/Becks_Hwang" title="上Twitter找我" target="_blank">
      <i class='social fa fa-twitter'></i>
      <span class="label">Twitter</span>
    </a>
  </li>

  


  <li class="navigation__item">
    <a href="mailto:BecksHwang@gmail.com" title="邮件联系我" target="_blank">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>


  </ul>
</nav>

          </div>
        </div>

      </div>

    </div>

    <div class="panel-cover--overlay cover-disabled"></div>
  </div>
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single">

  <header class="post-header">
    <div class="post-meta">
      <time datetime="2016-03-23T08:22:50.000Z" class="post-list__meta--date date">2016-03-23</time> &#8226; <span class="post-meta__tags tags">于&nbsp;
  <a class="tag-link" href="/tags/hibernate/">hibernate</a>, <a class="tag-link" href="/tags/spring/">spring</a>, <a class="tag-link" href="/tags/struts2/">struts2</a>
</span>
    </div>
    <h1 class="post-title">Spring + Hibernate + Struts2</h1>
  </header>

  <section class="post">
    <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><hr>
<p>整理一下框架。<a id="more"></a></p>
<h1 id="所需jar包"><a href="#所需jar包" class="headerlink" title="所需jar包"></a>所需jar包</h1><hr>
<h4 id="spring-jar包"><a href="#spring-jar包" class="headerlink" title="spring jar包"></a>spring jar包</h4><p><img src="/images/blogImages/spring.png" alt=""></p>
<h4 id="hibernate-jar包"><a href="#hibernate-jar包" class="headerlink" title="hibernate jar包"></a>hibernate jar包</h4><p><img src="/images/blogImages/hibernate.png" alt=""></p>
<h4 id="struts2-jar包"><a href="#struts2-jar包" class="headerlink" title="struts2 jar包"></a>struts2 jar包</h4><p><img src="/images/blogImages/struts2.png" alt=""></p>
<p>还有驱动包<br><img src="/images/blogImages/qudong.png" alt=""></p>
<h1 id="相关配置文件"><a href="#相关配置文件" class="headerlink" title="相关配置文件"></a>相关配置文件</h1><hr>
<h4 id="web-xml"><a href="#web-xml" class="headerlink" title="web.xml"></a>web.xml</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;2.5&quot;&gt;</span><br><span class="line">  &lt;display-name&gt;S2SH&lt;/display-name&gt;</span><br><span class="line">  &lt;welcome-file-list&gt;</span><br><span class="line">    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;</span><br><span class="line">  &lt;/welcome-file-list&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;!-- 添加对spring的支持 --&gt;  </span><br><span class="line">  &lt;context-param&gt;  </span><br><span class="line">    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;  </span><br><span class="line">    &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;  </span><br><span class="line">  &lt;/context-param&gt;  </span><br><span class="line">    </span><br><span class="line">    &lt;!-- 定义Spring监听器，加载Spring  --&gt;</span><br><span class="line">    &lt;listener&gt;  </span><br><span class="line">        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;  </span><br><span class="line">    &lt;/listener&gt;  </span><br><span class="line">      </span><br><span class="line">  &lt;!-- 添加对struts2的支持 --&gt;  </span><br><span class="line">  &lt;filter&gt;  </span><br><span class="line">    &lt;filter-name&gt;struts2&lt;/filter-name&gt;  </span><br><span class="line">    &lt;filter-class&gt;org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt;  </span><br><span class="line">  &lt;/filter&gt;   </span><br><span class="line">  </span><br><span class="line">  &lt;filter-mapping&gt;  </span><br><span class="line">    &lt;filter-name&gt;struts2&lt;/filter-name&gt;  </span><br><span class="line">    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;  </span><br><span class="line">  &lt;/filter-mapping&gt;  </span><br><span class="line">  </span><br><span class="line">  &lt;!-- Session延迟加载到页面  --&gt; </span><br><span class="line">   &lt;filter&gt;  </span><br><span class="line">    &lt;filter-name&gt;openSessionInViewFilter&lt;/filter-name&gt;  </span><br><span class="line">    &lt;filter-class&gt;org.springframework.orm.hibernate4.support.OpenSessionInViewFilter&lt;/filter-class&gt;  </span><br><span class="line">    &lt;init-param&gt;  </span><br><span class="line">      &lt;param-name&gt;singleSession&lt;/param-name&gt;  </span><br><span class="line">      &lt;param-value&gt;true&lt;/param-value&gt;  </span><br><span class="line">    &lt;/init-param&gt;  </span><br><span class="line">  &lt;/filter&gt;  </span><br><span class="line">    </span><br><span class="line">   &lt;filter-mapping&gt;  </span><br><span class="line">    &lt;filter-name&gt;openSessionInViewFilter&lt;/filter-name&gt;  </span><br><span class="line">    &lt;url-pattern&gt;*.action&lt;/url-pattern&gt;  </span><br><span class="line">  &lt;/filter-mapping&gt;  </span><br><span class="line">&lt;/web-app&gt;</span><br></pre></td></tr></table></figure>
<h4 id="struts-xml"><a href="#struts-xml" class="headerlink" title="struts.xml"></a>struts.xml</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;  </span><br><span class="line">&lt;!DOCTYPE struts PUBLIC  </span><br><span class="line">    &quot;-//Apache Software Foundation//DTD Struts Configuration 2.3//EN&quot;  </span><br><span class="line">    &quot;http://struts.apache.org/dtds/struts-2.3.dtd&quot;&gt;  </span><br><span class="line">      </span><br><span class="line">&lt;struts&gt;  </span><br><span class="line">    &lt;constant name=&quot;struts.action.extension&quot; value=&quot;action&quot; /&gt;</span><br><span class="line">    &lt;constant name=&quot;struts.objectFactory&quot; value=&quot;spring&quot;/&gt;  </span><br><span class="line">      </span><br><span class="line">    &lt;package name=&quot;s2sh&quot; namespace=&quot;/user&quot; extends=&quot;struts-default&quot;&gt;</span><br><span class="line">    	&lt;action name=&quot;user_*&quot; method=&quot;&#123;1&#125;&quot; class=&quot;userAction&quot;&gt;</span><br><span class="line">    		&lt;result name=&quot;success&quot;&gt;/success.jsp&lt;/result&gt;</span><br><span class="line">    		&lt;result name=&quot;error&quot;&gt;/index.jsp&lt;/result&gt;</span><br><span class="line">    	&lt;/action&gt;</span><br><span class="line">    &lt;/package&gt;</span><br><span class="line">      </span><br><span class="line">&lt;/struts&gt;</span><br></pre></td></tr></table></figure>
<p>解析<br>1.<constant name="struts.action.extension" value="action">该属性指定需要Struts2处理的请求后缀，默认值为action，即所有匹配*.action的请求都由Struts2处理。如果用户需要指定多个请求后缀，则多个后缀之间以英文逗号（,）隔开。</constant></p>
<p>2.<constant name="struts.objectFactory" value="spring">struts2把action交由spring管理，相当于struts1在配置文件中定义一个spring的controller一样交付spring容器管理。</constant></p>
<p>3.定义一个name为s2sh的package,如果想要访问package里面的action，需要加上namespace命名空间“/user”。</p>
<p>4.<action name="user_*" method="{1}" class="userAction">定义了action,如果想访问action,要加上namespace和action的那么，即“/user/user_<em>”，method={1}指定第一个</em>为方法的名字，方法对应class里面的方法。<strong>这里的class，就是action交由spring管理，对应spring中用注解扫秒生成的bean，注解名称要与这里class的值保持一致。</strong></action></p>
<h4 id="hibernate-cfg-xml"><a href="#hibernate-cfg-xml" class="headerlink" title="hibernate.cfg.xml"></a>hibernate.cfg.xml</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&apos;1.0&apos; encoding=&apos;UTF-8&apos;?&gt;  </span><br><span class="line">&lt;!DOCTYPE hibernate-configuration PUBLIC  </span><br><span class="line">         &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;  </span><br><span class="line">    &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;  </span><br><span class="line">  </span><br><span class="line">&lt;hibernate-configuration&gt;  </span><br><span class="line">    &lt;session-factory&gt;  </span><br><span class="line">		</span><br><span class="line">		&lt;!--方言--&gt;</span><br><span class="line">        &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;  </span><br><span class="line"></span><br><span class="line">        &lt;!-- 显示sql语句 --&gt;  </span><br><span class="line">        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;  </span><br><span class="line">        </span><br><span class="line">		&lt;!-- 自动更新 --&gt;</span><br><span class="line">        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">    &lt;/session-factory&gt;  </span><br><span class="line">&lt;/hibernate-configuration&gt;</span><br></pre></td></tr></table></figure>
<h4 id="applicationContext-xml"><a href="#applicationContext-xml" class="headerlink" title="applicationContext.xml"></a>applicationContext.xml</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;    </span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;    </span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;   </span><br><span class="line">    xmlns:p=&quot;http://www.springframework.org/schema/p&quot;  </span><br><span class="line">    xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;   </span><br><span class="line">    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;  </span><br><span class="line">    xmlns:jee=&quot;http://www.springframework.org/schema/jee&quot;  </span><br><span class="line">    xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;  </span><br><span class="line">    xsi:schemaLocation=&quot;    </span><br><span class="line">        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd  </span><br><span class="line">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd  </span><br><span class="line">        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd  </span><br><span class="line">        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-4.0.xsd  </span><br><span class="line">        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd&quot;&gt;    </span><br><span class="line">  </span><br><span class="line">    &lt;!-- 定义数据源 --&gt;</span><br><span class="line">    &lt;bean id=&quot;dataSource&quot;</span><br><span class="line">		class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;</span><br><span class="line">		&lt;property name=&quot;driverClassName&quot;</span><br><span class="line">			value=&quot;com.mysql.jdbc.Driver&quot;&gt;</span><br><span class="line">		&lt;/property&gt;</span><br><span class="line">		&lt;property name=&quot;url&quot;</span><br><span class="line">			value=&quot;jdbc:mysql://localhost:3306/ceshi&quot;&gt;</span><br><span class="line">		&lt;/property&gt;</span><br><span class="line">		&lt;property name=&quot;username&quot; value=&quot;root&quot;&gt;&lt;/property&gt;</span><br><span class="line">		&lt;property name=&quot;password&quot; value=&quot;sa&quot;&gt;&lt;/property&gt;</span><br><span class="line">	&lt;/bean&gt;</span><br><span class="line">      </span><br><span class="line">    &lt;!-- session工厂 --&gt;  </span><br><span class="line">    &lt;bean id=&quot;sessionFactory&quot;  </span><br><span class="line">        class=&quot;org.springframework.orm.hibernate4.LocalSessionFactoryBean&quot;&gt;  </span><br><span class="line">        &lt;property name=&quot;dataSource&quot;&gt;  </span><br><span class="line">            &lt;ref bean=&quot;dataSource&quot; /&gt;  </span><br><span class="line">        &lt;/property&gt;  </span><br><span class="line">        &lt;property name=&quot;configLocation&quot; value=&quot;classpath:hibernate.cfg.xml&quot;/&gt;  </span><br><span class="line">        &lt;!-- 自动扫描注解方式配置的hibernate类文件 --&gt;  </span><br><span class="line">        &lt;property name=&quot;packagesToScan&quot;&gt;  </span><br><span class="line">            &lt;list&gt;  </span><br><span class="line">                &lt;value&gt;com.becks.entity&lt;/value&gt;  </span><br><span class="line">            &lt;/list&gt;  </span><br><span class="line">        &lt;/property&gt;  </span><br><span class="line">    &lt;/bean&gt;  </span><br><span class="line">  </span><br><span class="line">    &lt;!-- 配置事务管理器 --&gt;  </span><br><span class="line">    &lt;bean id=&quot;transactionManager&quot;  </span><br><span class="line">        class=&quot;org.springframework.orm.hibernate4.HibernateTransactionManager&quot;&gt;  </span><br><span class="line">        &lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot; /&gt;  </span><br><span class="line">    &lt;/bean&gt;  </span><br><span class="line">  </span><br><span class="line">    &lt;!-- 配置事务通知属性 --&gt;  </span><br><span class="line">    &lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;transactionManager&quot;&gt;  </span><br><span class="line">        &lt;!-- 定义事务传播属性 --&gt;  </span><br><span class="line">        &lt;tx:attributes&gt;  </span><br><span class="line">            &lt;tx:method name=&quot;insert*&quot; propagation=&quot;REQUIRED&quot; /&gt;  </span><br><span class="line">            &lt;tx:method name=&quot;update*&quot; propagation=&quot;REQUIRED&quot; /&gt;  </span><br><span class="line">            &lt;tx:method name=&quot;edit*&quot; propagation=&quot;REQUIRED&quot; /&gt;  </span><br><span class="line">            &lt;tx:method name=&quot;save*&quot; propagation=&quot;REQUIRED&quot; /&gt;  </span><br><span class="line">            &lt;tx:method name=&quot;add*&quot; propagation=&quot;REQUIRED&quot; /&gt;  </span><br><span class="line">            &lt;tx:method name=&quot;new*&quot; propagation=&quot;REQUIRED&quot; /&gt;  </span><br><span class="line">            &lt;tx:method name=&quot;set*&quot; propagation=&quot;REQUIRED&quot; /&gt;  </span><br><span class="line">            &lt;tx:method name=&quot;remove*&quot; propagation=&quot;REQUIRED&quot; /&gt;  </span><br><span class="line">            &lt;tx:method name=&quot;delete*&quot; propagation=&quot;REQUIRED&quot; /&gt;  </span><br><span class="line">            &lt;tx:method name=&quot;change*&quot; propagation=&quot;REQUIRED&quot; /&gt;  </span><br><span class="line">            &lt;tx:method name=&quot;get*&quot; propagation=&quot;REQUIRED&quot; read-only=&quot;true&quot; /&gt;  </span><br><span class="line">            &lt;tx:method name=&quot;find*&quot; propagation=&quot;REQUIRED&quot; read-only=&quot;true&quot; /&gt;  </span><br><span class="line">            &lt;tx:method name=&quot;load*&quot; propagation=&quot;REQUIRED&quot; read-only=&quot;true&quot; /&gt;  </span><br><span class="line">            &lt;tx:method name=&quot;*&quot; propagation=&quot;REQUIRED&quot; read-only=&quot;true&quot; /&gt;  </span><br><span class="line">        &lt;/tx:attributes&gt;  </span><br><span class="line">    &lt;/tx:advice&gt;  </span><br><span class="line">      </span><br><span class="line">   </span><br><span class="line">    &lt;!-- 配置事务切面 --&gt;  </span><br><span class="line">    &lt;aop:config&gt;  </span><br><span class="line">        &lt;aop:pointcut id=&quot;serviceOperation&quot;  </span><br><span class="line">            expression=&quot;execution(* com.becks.service..*.*(..))&quot; /&gt;  </span><br><span class="line">        &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut-ref=&quot;serviceOperation&quot; /&gt;  </span><br><span class="line">    &lt;/aop:config&gt;  </span><br><span class="line">  </span><br><span class="line">    &lt;!-- 自动加载构建bean --&gt;  </span><br><span class="line">    &lt;context:component-scan base-package=&quot;com.becks&quot; /&gt;  </span><br><span class="line">  </span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
<h1 id="相关类"><a href="#相关类" class="headerlink" title="相关类"></a>相关类</h1><hr>
<h4 id="实体类-entity"><a href="#实体类-entity" class="headerlink" title="实体类(entity)"></a>实体类(entity)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">package com.becks.entity;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import javax.persistence.Column;</span><br><span class="line">import javax.persistence.Entity;</span><br><span class="line">import javax.persistence.GeneratedValue;</span><br><span class="line">import javax.persistence.Id;</span><br><span class="line">import javax.persistence.Table;</span><br><span class="line"></span><br><span class="line">import org.hibernate.annotations.GenericGenerator;</span><br><span class="line">@Entity</span><br><span class="line">@Table(name=&quot;t_user&quot;)</span><br><span class="line">public class User &#123;</span><br><span class="line"></span><br><span class="line">	private Integer id;</span><br><span class="line">	private String userName;</span><br><span class="line">	private String password;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	@Id</span><br><span class="line">	@GenericGenerator(name = &quot;generator&quot;, strategy = &quot;native&quot;)</span><br><span class="line">	@GeneratedValue(generator = &quot;generator&quot;)</span><br><span class="line">	@Column(name = &quot;id&quot;, length=11)</span><br><span class="line">	public Integer getId() &#123;</span><br><span class="line">		return id;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setId(Integer id) &#123;</span><br><span class="line">		this.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">	@Column(name = &quot;userName&quot;, length = 20)</span><br><span class="line">	public String getUserName() &#123;</span><br><span class="line">		return userName;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setUserName(String userName) &#123;</span><br><span class="line">		this.userName = userName;</span><br><span class="line">	&#125;</span><br><span class="line">	@Column(name = &quot;password&quot;, length = 20)</span><br><span class="line">	public String getPassword() &#123;</span><br><span class="line">		return password;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setPassword(String password) &#123;</span><br><span class="line">		this.password = password;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="action类"><a href="#action类" class="headerlink" title="action类"></a>action类</h4><p>注意：这里的注解Service(“userAction”)，名称要与struts.xml中action的class的值保持一致。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">package com.becks.action;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import javax.annotation.Resource;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line">import org.apache.struts2.interceptor.ServletRequestAware;</span><br><span class="line">import org.aspectj.weaver.patterns.ThisOrTargetAnnotationPointcut;</span><br><span class="line">import org.springframework.stereotype.Service;</span><br><span class="line">import org.springframework.transaction.annotation.Transactional;</span><br><span class="line"></span><br><span class="line">import com.becks.entity.User;</span><br><span class="line">import com.becks.service.UserService;</span><br><span class="line">import com.opensymphony.xwork2.ActionSupport;</span><br><span class="line"></span><br><span class="line">@Service(&quot;userAction&quot;)</span><br><span class="line">@Transactional</span><br><span class="line">public class UserAction extends ActionSupport implements ServletRequestAware &#123;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * </span><br><span class="line">	 */</span><br><span class="line">	private static final long serialVersionUID = 1L;</span><br><span class="line"></span><br><span class="line">	private HttpServletRequest request;</span><br><span class="line"></span><br><span class="line">	@Resource</span><br><span class="line">	private UserService userService;</span><br><span class="line"></span><br><span class="line">	private User user;</span><br><span class="line">	private List&lt;User&gt; users;</span><br><span class="line">	private String error;</span><br><span class="line"></span><br><span class="line">	public User getUser() &#123;</span><br><span class="line">		return user;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setUser(User user) &#123;</span><br><span class="line">		this.user = user;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public List&lt;User&gt; getUsers() &#123;</span><br><span class="line">		return users;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setUsers(List&lt;User&gt; users) &#123;</span><br><span class="line">		this.users = users;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String getError() &#123;</span><br><span class="line">		return error;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setError(String error) &#123;</span><br><span class="line">		this.error = error;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String login() throws Exception &#123;</span><br><span class="line">		HttpSession session = request.getSession();</span><br><span class="line">		User currentUser = userService.findUserByNameAndPassword(user);</span><br><span class="line">		if (currentUser != null) &#123;</span><br><span class="line">			session.setAttribute(&quot;currentUser&quot;, currentUser);</span><br><span class="line">			return SUCCESS;</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			error = &quot;用户名或密码错误&quot;;</span><br><span class="line">			return ERROR;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public String userList() &#123;</span><br><span class="line">		users = userService.findAllList();</span><br><span class="line">		return &quot;userList&quot;;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void setServletRequest(HttpServletRequest request) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		this.request = request;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>1.登录验证方法login中返回的String，与struts.xml中action的子节点result的name相对应，struts2对相关细节进行了封装。<br>2.查询所有用户方法userList中的users名称，对应JSP页面userList.jsp打印的名称。即方法中的属性名称，对应<strong>页面表单提交过来的</strong>或者<strong>是响应到页面的</strong>数据的类型和名称，<strong>名称必须保持一致</strong>。</p>
<h4 id="service类"><a href="#service类" class="headerlink" title="service类"></a>service类</h4><p>service<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package com.becks.service;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import com.becks.entity.User;</span><br><span class="line"></span><br><span class="line">public interface UserService &#123;</span><br><span class="line"></span><br><span class="line">	public void saveUser(User user);</span><br><span class="line">	</span><br><span class="line">	public void updateUser(User user);</span><br><span class="line">	</span><br><span class="line">	public User findUserById(int id);</span><br><span class="line">	</span><br><span class="line">	public void deleteUser(User user);</span><br><span class="line">	</span><br><span class="line">	public List&lt;User&gt; findAllList();</span><br><span class="line">	</span><br><span class="line">	public User findUserByNameAndPassword(User user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>impl<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">package com.becks.service.impl;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import javax.annotation.Resource;</span><br><span class="line"></span><br><span class="line">import org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line">import com.becks.dao.BaseDao;</span><br><span class="line">import com.becks.entity.User;</span><br><span class="line">import com.becks.service.UserService;</span><br><span class="line"></span><br><span class="line">@Service(&quot;userService&quot;)</span><br><span class="line">public class UserServiceImpl implements UserService&#123;</span><br><span class="line"></span><br><span class="line">	@Resource</span><br><span class="line">	private BaseDao&lt;User&gt; baseDao;</span><br><span class="line">	</span><br><span class="line">	public void saveUser(User user) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		baseDao.save(user);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void updateUser(User user) &#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		baseDao.update(user);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public User findUserById(int id) &#123;</span><br><span class="line">		return baseDao.get(User.class, id);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void deleteUser(User user) &#123;</span><br><span class="line">		baseDao.delete(user);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public List&lt;User&gt; findAllList() &#123;</span><br><span class="line">		return baseDao.find(&quot;from User&quot;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public User findUserByNameAndPassword(User user) &#123;</span><br><span class="line">		return baseDao.get(&quot;from User u where u.userName=? and u.password=?&quot;, new Object[]&#123;user.getUserName(),user.getPassword()&#125;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="Dao类"><a href="#Dao类" class="headerlink" title="Dao类"></a>Dao类</h4><p>dao<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line">package com.becks.dao;</span><br><span class="line"></span><br><span class="line">import java.io.Serializable;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 基础数据库操作类</span><br><span class="line"> * </span><br><span class="line"> * @author Becks</span><br><span class="line"> * </span><br><span class="line"> */</span><br><span class="line">public interface BaseDao&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 保存一个对象</span><br><span class="line">	 * </span><br><span class="line">	 * @param o</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public Serializable save(T o);</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 删除一个对象</span><br><span class="line">	 * </span><br><span class="line">	 * @param o</span><br><span class="line">	 */</span><br><span class="line">	public void delete(T o);</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 更新一个对象</span><br><span class="line">	 * </span><br><span class="line">	 * @param o</span><br><span class="line">	 */</span><br><span class="line">	public void update(T o);</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 保存或更新对象</span><br><span class="line">	 * </span><br><span class="line">	 * @param o</span><br><span class="line">	 */</span><br><span class="line">	public void saveOrUpdate(T o);</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 查询</span><br><span class="line">	 * </span><br><span class="line">	 * @param hql</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public List&lt;T&gt; find(String hql);</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 查询集合</span><br><span class="line">	 * </span><br><span class="line">	 * @param hql</span><br><span class="line">	 * @param param</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public List&lt;T&gt; find(String hql, Object[] param);</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 查询集合</span><br><span class="line">	 * </span><br><span class="line">	 * @param hql</span><br><span class="line">	 * @param param</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public List&lt;T&gt; find(String hql, List&lt;Object&gt; param);</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 查询集合(带分页)</span><br><span class="line">	 * </span><br><span class="line">	 * @param hql</span><br><span class="line">	 * @param param</span><br><span class="line">	 * @param page</span><br><span class="line">	 *            查询第几页</span><br><span class="line">	 * @param rows</span><br><span class="line">	 *            每页显示几条记录</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public List&lt;T&gt; find(String hql, Object[] param, Integer page, Integer rows);</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 查询集合(带分页)</span><br><span class="line">	 * </span><br><span class="line">	 * @param hql</span><br><span class="line">	 * @param param</span><br><span class="line">	 * @param page</span><br><span class="line">	 * @param rows</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public List&lt;T&gt; find(String hql, List&lt;Object&gt; param, Integer page, Integer rows);</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 获得一个对象</span><br><span class="line">	 * </span><br><span class="line">	 * @param c</span><br><span class="line">	 *            对象类型</span><br><span class="line">	 * @param id</span><br><span class="line">	 * @return Object</span><br><span class="line">	 */</span><br><span class="line">	public T get(Class&lt;T&gt; c, Serializable id);</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 获得一个对象</span><br><span class="line">	 * </span><br><span class="line">	 * @param hql</span><br><span class="line">	 * @param param</span><br><span class="line">	 * @return Object</span><br><span class="line">	 */</span><br><span class="line">	public T get(String hql, Object[] param);</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 获得一个对象</span><br><span class="line">	 * </span><br><span class="line">	 * @param hql</span><br><span class="line">	 * @param param</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public T get(String hql, List&lt;Object&gt; param);</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * select count(*) from 类</span><br><span class="line">	 * </span><br><span class="line">	 * @param hql</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public Long count(String hql);</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * select count(*) from 类</span><br><span class="line">	 * </span><br><span class="line">	 * @param hql</span><br><span class="line">	 * @param param</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public Long count(String hql, Object[] param);</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * select count(*) from 类</span><br><span class="line">	 * </span><br><span class="line">	 * @param hql</span><br><span class="line">	 * @param param</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public Long count(String hql, List&lt;Object&gt; param);</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 执行HQL语句</span><br><span class="line">	 * </span><br><span class="line">	 * @param hql</span><br><span class="line">	 * @return 响应数目</span><br><span class="line">	 */</span><br><span class="line">	public Integer executeHql(String hql);</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 执行HQL语句</span><br><span class="line">	 * </span><br><span class="line">	 * @param hql</span><br><span class="line">	 * @param param</span><br><span class="line">	 * @return 响应数目</span><br><span class="line">	 */</span><br><span class="line">	public Integer executeHql(String hql, Object[] param);</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * 执行HQL语句</span><br><span class="line">	 * </span><br><span class="line">	 * @param hql</span><br><span class="line">	 * @param param</span><br><span class="line">	 * @return</span><br><span class="line">	 */</span><br><span class="line">	public Integer executeHql(String hql, List&lt;Object&gt; param);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>impl<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br></pre></td><td class="code"><pre><span class="line">package com.becks.dao.impl;</span><br><span class="line"></span><br><span class="line">import java.io.Serializable;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import org.hibernate.Query;</span><br><span class="line">import org.hibernate.Session;</span><br><span class="line">import org.hibernate.SessionFactory;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line">import com.becks.dao.BaseDao;</span><br><span class="line"></span><br><span class="line">@Repository(&quot;baseDao&quot;)</span><br><span class="line">@SuppressWarnings(&quot;all&quot;)</span><br><span class="line">public class BaseDaOImpl&lt;T&gt; implements BaseDao&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">	private SessionFactory sessionFactory;</span><br><span class="line"></span><br><span class="line">	public SessionFactory getSessionFactory() &#123;</span><br><span class="line">		return sessionFactory;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Autowired</span><br><span class="line">	public void setSessionFactory(SessionFactory sessionFactory) &#123;</span><br><span class="line">		this.sessionFactory = sessionFactory;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	private Session getCurrentSession() &#123;</span><br><span class="line">		return sessionFactory.getCurrentSession();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public Serializable save(T o) &#123;</span><br><span class="line">		return this.getCurrentSession().save(o);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void delete(T o) &#123;</span><br><span class="line">		this.getCurrentSession().delete(o);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void update(T o) &#123;</span><br><span class="line">		this.getCurrentSession().update(o);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void saveOrUpdate(T o) &#123;</span><br><span class="line">		this.getCurrentSession().saveOrUpdate(o);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public List&lt;T&gt; find(String hql) &#123;</span><br><span class="line">		return this.getCurrentSession().createQuery(hql).list();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public List&lt;T&gt; find(String hql, Object[] param) &#123;</span><br><span class="line">		Query q = this.getCurrentSession().createQuery(hql);</span><br><span class="line">		if (param != null &amp;&amp; param.length &gt; 0) &#123;</span><br><span class="line">			for (int i = 0; i &lt; param.length; i++) &#123;</span><br><span class="line">				q.setParameter(i, param[i]);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		return q.list();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public List&lt;T&gt; find(String hql, List&lt;Object&gt; param) &#123;</span><br><span class="line">		Query q = this.getCurrentSession().createQuery(hql);</span><br><span class="line">		if (param != null &amp;&amp; param.size() &gt; 0) &#123;</span><br><span class="line">			for (int i = 0; i &lt; param.size(); i++) &#123;</span><br><span class="line">				q.setParameter(i, param.get(i));</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		return q.list();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public List&lt;T&gt; find(String hql, Object[] param, Integer page, Integer rows) &#123;</span><br><span class="line">		if (page == null || page &lt; 1) &#123;</span><br><span class="line">			page = 1;</span><br><span class="line">		&#125;</span><br><span class="line">		if (rows == null || rows &lt; 1) &#123;</span><br><span class="line">			rows = 10;</span><br><span class="line">		&#125;</span><br><span class="line">		Query q = this.getCurrentSession().createQuery(hql);</span><br><span class="line">		if (param != null &amp;&amp; param.length &gt; 0) &#123;</span><br><span class="line">			for (int i = 0; i &lt; param.length; i++) &#123;</span><br><span class="line">				q.setParameter(i, param[i]);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		return q.setFirstResult((page - 1) * rows).setMaxResults(rows).list();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public List&lt;T&gt; find(String hql, List&lt;Object&gt; param, Integer page, Integer rows) &#123;</span><br><span class="line">		if (page == null || page &lt; 1) &#123;</span><br><span class="line">			page = 1;</span><br><span class="line">		&#125;</span><br><span class="line">		if (rows == null || rows &lt; 1) &#123;</span><br><span class="line">			rows = 10;</span><br><span class="line">		&#125;</span><br><span class="line">		Query q = this.getCurrentSession().createQuery(hql);</span><br><span class="line">		if (param != null &amp;&amp; param.size() &gt; 0) &#123;</span><br><span class="line">			for (int i = 0; i &lt; param.size(); i++) &#123;</span><br><span class="line">				q.setParameter(i, param.get(i));</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		return q.setFirstResult((page - 1) * rows).setMaxResults(rows).list();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public T get(Class&lt;T&gt; c, Serializable id) &#123;</span><br><span class="line">		return (T) this.getCurrentSession().get(c, id);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public T get(String hql, Object[] param) &#123;</span><br><span class="line">		List&lt;T&gt; l = this.find(hql, param);</span><br><span class="line">		if (l != null &amp;&amp; l.size() &gt; 0) &#123;</span><br><span class="line">			return l.get(0);</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			return null;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public T get(String hql, List&lt;Object&gt; param) &#123;</span><br><span class="line">		List&lt;T&gt; l = this.find(hql, param);</span><br><span class="line">		if (l != null &amp;&amp; l.size() &gt; 0) &#123;</span><br><span class="line">			return l.get(0);</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			return null;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public Long count(String hql) &#123;</span><br><span class="line">		return (Long) this.getCurrentSession().createQuery(hql).uniqueResult();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public Long count(String hql, Object[] param) &#123;</span><br><span class="line">		Query q = this.getCurrentSession().createQuery(hql);</span><br><span class="line">		if (param != null &amp;&amp; param.length &gt; 0) &#123;</span><br><span class="line">			for (int i = 0; i &lt; param.length; i++) &#123;</span><br><span class="line">				q.setParameter(i, param[i]);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		return (Long) q.uniqueResult();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public Long count(String hql, List&lt;Object&gt; param) &#123;</span><br><span class="line">		Query q = this.getCurrentSession().createQuery(hql);</span><br><span class="line">		if (param != null &amp;&amp; param.size() &gt; 0) &#123;</span><br><span class="line">			for (int i = 0; i &lt; param.size(); i++) &#123;</span><br><span class="line">				q.setParameter(i, param.get(i));</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		return (Long) q.uniqueResult();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public Integer executeHql(String hql) &#123;</span><br><span class="line">		return this.getCurrentSession().createQuery(hql).executeUpdate();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public Integer executeHql(String hql, Object[] param) &#123;</span><br><span class="line">		Query q = this.getCurrentSession().createQuery(hql);</span><br><span class="line">		if (param != null &amp;&amp; param.length &gt; 0) &#123;</span><br><span class="line">			for (int i = 0; i &lt; param.length; i++) &#123;</span><br><span class="line">				q.setParameter(i, param[i]);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		return q.executeUpdate();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public Integer executeHql(String hql, List&lt;Object&gt; param) &#123;</span><br><span class="line">		Query q = this.getCurrentSession().createQuery(hql);</span><br><span class="line">		if (param != null &amp;&amp; param.size() &gt; 0) &#123;</span><br><span class="line">			for (int i = 0; i &lt; param.size(); i++) &#123;</span><br><span class="line">				q.setParameter(i, param.get(i));</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		return q.executeUpdate();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="相关页面"><a href="#相关页面" class="headerlink" title="相关页面"></a>相关页面</h1><hr>
<h4 id="index-jsp"><a href="#index-jsp" class="headerlink" title="index.jsp"></a>index.jsp</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">    pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=&quot;$&#123;pageContext.request.contextPath &#125;/user/user_login.action&quot; method=&quot;post&quot;&gt;</span><br><span class="line">	userName:&lt;input type=&quot;text&quot; name=&quot;user.userName&quot; value=&quot;$&#123;user.userName &#125;&quot;/&gt;&lt;br/&gt;</span><br><span class="line">	passWord:&lt;input type=&quot;password&quot; name=&quot;user.password&quot; value=&quot;$&#123;user.password &#125;&quot;&gt;&lt;br/&gt;</span><br><span class="line">	&lt;input type=&quot;submit&quot; value=&quot;login&quot;/&gt;&lt;font color=&quot;red&quot;&gt;$&#123;error &#125;&lt;/font&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h4 id="success-jsp"><a href="#success-jsp" class="headerlink" title="success.jsp"></a>success.jsp</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">    pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">欢迎：$&#123;currentUser.userName &#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h4 id="userList-jsp"><a href="#userList-jsp" class="headerlink" title="userList.jsp"></a>userList.jsp</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;  </span><br><span class="line">&lt;%@ taglib prefix=&quot;s&quot; uri=&quot;/struts-tags&quot; %&gt; &lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	 &lt;s:iterator value=&quot;users&quot;&gt;  </span><br><span class="line">        &lt;h3&gt;name = $&#123;userName&#125;&lt;/h3&gt;</span><br><span class="line">     &lt;/s:iterator&gt; </span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

  </section>

</article>


<section class="post-comments">
  <div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//beckshwang.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


            <footer class="footer">
    <span class="footer__copyright">
        本站点采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>
    </span>
    <span class="footer__copyright">
        基于 <a href="http://hexo.io">Hexo</a> 搭建，感谢 <a href="https://pages.github.com/">GitHub Pages</a> 提供免费的托管服务
    </span>
    <span class="footer__copyright">
        &copy; 2016 - 本站由 <a href="/">@BecksHwang</a> 创建,
        使用<a href="https://github.com/lenbo-ma/hexo-theme-vno">hexo-theme-vno</a>主题,
        修改自<a href="http://github.com/onevcat/vno" target="_blank">Vno</a>
    </span>
</footer>

        </div>
    </div>

    <script src="http://cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
    <script src="/js/main.js"></script>

     
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-42596364-1', 'auto');
	ga('send', 'pageview');
</script>

</body>
</html>
